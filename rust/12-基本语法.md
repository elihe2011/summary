





## 2.8 泛型和特性

### 2.8.1 泛型 Generics

#### 2.8.1.1 泛型是什么

泛型就是一种多态。泛型主要目的是为程序员提供编程的便利，减少代码的臃肿，同时可以极大地丰富语言本身的表达能力。

```rust
fn add<T: std::ops::Add<Output = T>>(x: T, y: T) -> T {
    x + y
}

fn main() {
    println!("add i8: {}", add(3i8, 5i8));
    println!("add i32: {}", add(14, 9));
    println!("add f64: {}", add(1.5f64, 3.1f64));
}
```

示例2：

```rust
fn largest<T: std::cmp::PartialOrd>(list: &[T]) -> &T {
    let mut max= &list[0];

    for item in list.iter() {
        if item > max {
            max = item;
        }
    }

    max
}


fn main() {
    let number_list = vec![32, 17, 25, 68, 23];
    let result = largest(&number_list);
    println!("the largest number in list: {}", result);

    let char_list = vec!['a', 'z', 'g', 'x'];
    let result = largest(&char_list);
    println!("the largest char in list: {}", result);
}
```





### 2.8.2 特性 Trait





















- 指针：最底层的是裸指针`*const T`和`*mut T`，但解引用它们是不安全的，必须放到`unsafe`块里。

- 函数：具有函数类型的变量实质上是一个函数指针。

- 元类型：即`()`，其唯一的值也是`()`。



- 





```rust


// string
let s = "hello, world!";       // &str
let s1 = s.to_string();        // String
let s2 = String::from("ok");   // String



// raw pointers
let x = 3;
let raw = &x as *const i32;
let p = unsafe { *raw };
let raw2: *const i32 = &x;
let p2 = unsafe { *raw2 };

// function
fn foo(x: i32) -> i32 { x };
let bar: fn(x: i32) -> i32 = foo;
```

特殊用法：

- 单字节字符 `b'H'`，单字节字符串 `b"hello"`，仅限于ASCII字符
- 原始字符串 `r#"..."#`，不需要对特殊字符进行转义
- 使用 & 将 String 转换为 `&str` 不涉及分配内存，但使用 `to_string()` 将 `&str` 转换为 String 则需要分配内存
- 数组的长度是不可变的，动态的数组称为向量(vector)，可使用宏 `vec!` 来创建
- 元组可通过 == 及 != 来判断是否相同
- 小于等于32个元素的数组、小于等于12个元素的元组，在值传递时自动复制
- 原生类型不支持隐式转换，需要使用 as 关键字显式转换
- type 关键字定义类型的别名，采用驼峰命名法

```rust
// explicit conversion
let decimal = 65.4321_f32;
let integer = decimal as u8;
let character = integer as char;

// type alias
type NanoSecond = u64;
type Point = (u8, u8);
```











# 7. 注释

- 单行注释：以 // 开始

- 块注释：`/*  */`
- 文档注释：`///` 或 `//!`，支持 Markdown 语法，配合 rustdoc 自动生成说明文档
  - `///` 等价于属性 `#[doc = "..."]`
  - `//!` 等价于 `#[doc = "/// ..."]`



















































