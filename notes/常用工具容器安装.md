# 1. MySQL

准备操作：

```bash
mkdir -p /home/ubuntu/mysql/{conf,data}

cat > /home/ubuntu/mysql/conf/mysql.cnf <<EOF
[client]
default-character-set=utf8

[mysql]
default-character-set=utf8

[mysqld]
port=13306
#character-set-client-handshake=FALSE
character-set-server=utf8mb4
character-set-filesystem=utf8mb4
collation-server=utf8mb4_general_ci
init-connect='SET NAMES utf8mb4'
skip-character-set-client-handshake
mysql skip-name-resolve
EOF

docker run -d --name mysql-server -p 3306:3306 \
    -v /home/ubuntu/mysql/data:/var/lib/mysql \  
    -v /home/ubuntu/mysql/conf/mysql.cnf:/etc/mysql/conf.d/mysq.cnf \
    -v /etc/localtime/:/etc/localtime/:ro \
    -e MYSQL_ROOT_PASSWORD=123456 \
    --restart=always mysql
```



# 2. Etcd

```bash
mkdir -p /home/ubuntu/etcd/data

docker run -d --name etcd-server \
    -p 2379:2379  -p 2380:2380 \
    -v /home/ubuntu/etcd/data:/var/lib/etcd \
    -e ALLOW_NONE_AUTHENTICATION=yes \
    -e ETCD_ADVERTISE_CLIENT_URLS=http://etcd-server:2379 \
    --restart=always bitnami/etcd:3.3.27
    
docker run -d --name etcd-server \
    -p 2379:2379  -p 2380:2380 \
    -v /home/ubuntu/etcd/data:/bitnami/etcd/data \
    -e ALLOW_NONE_AUTHENTICATION=yes \
    -e ETCD_NAME=etcd-0 \
    -e ETCD_ADVERTISE_CLIENT_URLS=http://0.0.0.0:2379 \
    -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379 \
    -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 \
    -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://0.0.0.0:2380 \
    -e ETCD_INITIAL_CLUSTER=etcd-0=http://0.0.0.0:2380 \
    --restart=always --privileged bitnami/etcd:3.5.4
    
    
curl -v http://127.0.0.1:2379/v2/keys/hello -XPUT -d value="hello world"
curl -v http://127.0.0.1:2379/v2/keys/hello -XGET
```



# 3. Docker

```bash
docker run -d --name docker2 \
    -p 8080:80 \
    -v /var/run/docker.sock:/var/run/docker.sock \
    --restart=always docker
    
docker run --name docker3 \
    -p 8080:80 \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -it docker 
    
docker run --name=nginx --net=host -p 80:80 -d nginx
```

