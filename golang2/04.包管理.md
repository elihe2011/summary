# 1. 包管理

**包管理的三种方式**：

- GOPATH
- vendor
- go mod



 **`GO111MODULE`** ：

- **off**：`GOPATH mode`，查找 vendor 和  `GOPATH` 目录
- **on**：`module-aware mode`，使用 go module, 忽略 `GOPATH` 
- **auto**：默认模式
  - 不在 `GOPATH` 下，且存在 `go.mod` 时，开启支持
  - **在 `GOPATH` 下，即使存在 `go.mod`，也禁用支持**
  



**关于go vendor，下面说法正确的是（ABD）**
A. 基本思路是将引用的外部包的源代码放在当前工程的vendor目录下面
B. 编译go代码会优先从vendor目录先寻找依赖包
C. 可以指定引用某个特定版本的外部包  **//无法引入外部包**
D. 有了vendor目录后，打包当前的工程代码到其他机器的$GOPATH/src下都可以通过编译



# 2. `go mod`

```bash
go mod init               初始化模块，创建go.mod文件
go mod download           下载依赖的模块到本地缓存 `$GOPATH/pkg/mod`
go mod graph              打印模块依赖图
go mod tidy               包整理，删除无用的，下载缺少的
go mod vendor             将依赖拷贝到本地vendor目录下
go mod verify             校验依赖
go mod why                解释为什么需要这个包
go mod edit               编辑go.mod文件


# 示例
go mod github.com/elihe2011/hello

go mod download google.golang.org/grpc@v1.35.0

go mod edit -replace google.golang.org/grpc@v1.35.0=google.golang.org/grpc@v1.26.0

go mod edit -fmt
```



# 3. 包查询

```bash
go list -m all   
go list -m -u all    # 可升级的

# 包相关的所有版本
go list -m -versions google.golang.org/grpc

# 某个版本的详情
go list -m -json google.golang.org/grpc@latest
{
        "Path": "google.golang.org/grpc",
        "Version": "v1.36.0",
        "Time": "2021-02-24T22:40:52Z",
        "GoVersion": "1.11"
}

# 可执行程序版本
go version -m ~/go/bin/goimports.exe

# 获取指定版本的包
go get package@version

# 清除所有mod缓存
go clean -modcache 
```



# 4. `go.mod` 

```go
module gitee.com/elihe/golearn

go 1.15

require (
	github.com/afex/hystrix-go v0.0.0-20180502004556-fa1af6a1f4f5
	github.com/coreos/etcd v3.3.25+incompatible
	github.com/emicklei/proto v1.9.0
	github.com/go-redis/redis v6.15.9+incompatible // indirect
	github.com/go-redis/redis/v8 v8.8.2
)

replace (
	golang.org/x/crypto v0.0.0-20180820150726-614d502a4dac => github.com/golang/crypto v0.0.0-20180820150726-614d502a4dac
	golang.org/x/net v0.0.0-20180821023952-922f4815f713 => github.com/golang/net v0.0.0-20180826012351-8a410e7b638d
	golang.org/x/text v0.3.0 => github.com/golang/text v0.3.0
)
```



# 5. vendor 目录

关于go vendor，下面说法正确的是（ABD）
A. 基本思路是将引用的外部包的源代码放在当前工程的vendor目录下面
B. 编译go代码会优先从vendor目录先寻找依赖包
C. 可以指定引用某个特定版本的外部包  **//无法引入外部包**
D. 有了vendor目录后，打包当前的工程代码到其他机器的$GOPATH/src下都可以通过编译



# 6. 包查找顺序

- `GO111MODULE = on`:
  - `vender` 目录 (1.17+，go mod vendor)
  - `$GOPATH/pkg/mod`

- `GO111MODULE = off`:
  - `vender` 目录
  - `$GOPATH/src`
  - `$GOROOT/src`



# 7. 代理设置

```bash
go env -w GOPROXY=https://goproxy.io,direct

go env -w GOSUMDB="sum.golang.google.cn"   # 专门为国内提供的sum验证服务
```



# 3. go 命令

```go
go env 打印Go语言的环境信息

go run 编译并运行命令源码文件

go get 下载依赖包，并进行编译和安装

go build 编译源码文件或包

go install 编译并安装指定的代码包

go clean 删除掉执行其它命令时产生的文件和目录

go doc 打印附于Go语言程序实体上的文档

go test 代码测试

go list 列出指定代码包信息

go fix 将源码文件的旧版本代码修正为新版本的代码

go vet 静态检查工具

go fmt 格式化代码

go tool pprof 交互式访问概要文件的内容

godoc fmt Println   查看具体的函数说明
godoc --http=:8080
```

